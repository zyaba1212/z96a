# Этапы разработки

Разбито на минимально необходимые шаги (правило 10).

| Этап | Содержание | Результат этапа |
|------|------------|------------------|
| **0. Подготовка** | Репозиторий, Next.js, TS, ESLint, Prisma (схема без детализации), .env. | Каркас проекта, база готова к миграциям. |
| **1. Авторизация** | Подключение Phantom (@solana/wallet-adapter-react), подпись сообщения для верификации, сохранение/привязка пользователя в БД (pubkey). | Вход через Phantom, после входа доступна кнопка «Предложить». |
| **2. 3D-планета (только просмотр)** | Three.js-сцена, текстура Земли (Full HD), камера (zoom in/out), вращение (вкл/выкл). Без сети и границ. | Стабильная планета с управлением. |
| **3. Геоданные на планете** | Загрузка границ (GeoJSON, Natural Earth) и отрисовка на сфере; подписи государств/городов (библиотека или ручная расстановка). API-прокси для геоданных при необходимости. | Границы и подписи на глобусе. |
| **4. Визуализация сети** | Модель данных сети в БД и в API; отображение элементов (кабели, БС, спутники и т.д.) по стандартам (поиск ITU/ГОСТ). Иконки и цвета по design.md. | Текущая сеть видна на планете. |
| **5. Режим «Предложение» — UI и поток** | Страница редактирования, панель инструментов (добавить/удалить/соединить), выбор из списка типов и «новый элемент с источником». Состояние предложения в Zustand; без блокчейна пока — только вызов API и запись в БД. | Редактирование сети с сохранением в БД. |
| **6. Блокчейн и подпись** | Anchor-программа: регистрация действия (тип + данные + подпись). Фронт: формирование транзакции, подпись в Phantom, отправка; API после успеха пишет в БД и при необходимости в chain. | Все действия подтверждаются подписью и фиксируются. |
| **7. История и откат** | История действий в UI (из БД), откат как обратная транзакция с подписью; API и контракт поддерживают откат. | Пользователь видит историю и может откатить действие. |
| **8. Полировка** | Производительность (LOD, инстансинг, воркеры), безопасность, юзабилити, подсказки. | Соответствие нефункциональным требованиям. |

---

- **Перед каждым следующим этапом** (правило 6): краткое описание текущего состояния — что сделано, что делаем дальше.
- **После каждого этапа** (правило 13, `.cursor/rules/general.mdc`): **коммит и пуш** в репозиторий [zyaba1212/z96a](https://github.com/zyaba1212/z96a).
